import{a as o}from"./p-86121117.js";import{s as i}from"./p-caaec0f6.js";import{g as l,a as n}from"./p-e173b5aa.js";import{t as a}from"./p-dc169b96.js";import{a as d}from"./p-1c2e2695.js";const t=async()=>{var d,e,t,c,r,s;if(!(null===(d=i.selectedPrice)||void 0===d?void 0:d.id))return;if((null===(e=i.selectedPrice)||void 0===e?void 0:e.ad_hoc)&&(null===i.adHocAmount||void 0===i.adHocAmount))return;const v=l(null==i?void 0:i.formId,i.mode);try{i.busy=!0;const d=await o({checkout:v,data:{price:null===(t=i.selectedPrice)||void 0===t?void 0:t.id,quantity:Math.max((null===(c=i.selectedPrice)||void 0===c?void 0:c.ad_hoc)?1:i.quantity,1),variant:null===(r=i.selectedVariant)||void 0===r?void 0:r.id,...(null===(s=i.selectedPrice)||void 0===s?void 0:s.ad_hoc)?{ad_hoc_amount:i.adHocAmount}:{}},live_mode:"test"!==i.mode});n(d,i.formId),a(!0),i.dialog=null}catch(o){console.error(o),i.error=o}finally{i.busy=!1}},v=(o,e={})=>{var a,t,l,c,r,n,s;if((null===(a=i.selectedPrice)||void 0===a?void 0:a.id)&&(!(null===(t=i.selectedPrice)||void 0===t?void 0:t.ad_hoc)||i.adHocAmount))return d(o,{line_items:[{price:null===(l=i.selectedPrice)||void 0===l?void 0:l.id,quantity:(null===(c=i.selectedPrice)||void 0===c?void 0:c.ad_hoc)?1:i.quantity,...(null===(r=i.selectedPrice)||void 0===r?void 0:r.ad_hoc)?{ad_hoc_amount:i.adHocAmount}:{},...(null===(n=i.selectedVariant)||void 0===n?void 0:n.id)?{variant:null===(s=i.selectedVariant)||void 0===s?void 0:s.id}:{}}],...e})};export{v as g,t as s};