import{proxyCustomElement,HTMLElement,h,Host}from"@stencil/core/internal/client";import{s as state,o as onChange,i as isProductOutOfStock,b as isSelectedVariantMissing}from"./watchers.js";import{g as getProductBuyLink,s as submitCartForm}from"./mutations4.js";const scProductBuyButtonCss="sc-product-buy-button{position:relative}sc-product-buy-button a.wp-block-button__link{position:relative;text-decoration:none}sc-product-buy-button .sc-block-button--sold-out,sc-product-buy-button .sc-block-button--unavailable{display:none !important}sc-product-buy-button.is-unavailable a{display:none !important}sc-product-buy-button.is-unavailable .sc-block-button--unavailable{display:initial !important}sc-product-buy-button.is-sold-out a{display:none !important}sc-product-buy-button.is-sold-out .sc-block-button--sold-out{display:initial !important}sc-product-buy-button sc-spinner::part(base){--indicator-color:currentColor;--spinner-size:12px;position:absolute;top:calc(50% - var(--spinner-size) + var(--spinner-size) / 4);left:calc(50% - var(--spinner-size) + var(--spinner-size) / 4)}sc-product-buy-button [data-text],sc-product-buy-button [data-loader]{transition:opacity var(--sc-transition-fast) ease-in-out, visibility var(--sc-transition-fast) ease-in-out}sc-product-buy-button [data-loader]{opacity:0;visibility:hidden}sc-product-buy-button.is-disabled{pointer-events:none}sc-product-buy-button.is-busy [data-text]{opacity:0;visibility:hidden}sc-product-buy-button.is-busy [data-loader]{opacity:1;visibility:visible}sc-product-buy-button.is-out-of-stock [data-text]{opacity:0.6}",ScProductBuyButton$1=proxyCustomElement(class extends HTMLElement{constructor(){super(),this.__registerHost(),this.addToCart=void 0}handleCartClick(t){var o,i,s;if(t.preventDefault(),!state.busy){if(null===(o=null==state?void 0:state.selectedPrice)||void 0===o?void 0:o.ad_hoc)return state.dialog=this.addToCart?"ad_hoc_cart":"ad_hoc_buy";if(!this.addToCart){const t=null===(s=null===(i=null===window||void 0===window?void 0:window.scData)||void 0===i?void 0:i.pages)||void 0===s?void 0:s.checkout;if(!t)return;return window.location.assign(getProductBuyLink(t,{no_cart:!this.addToCart}))}submitCartForm()}}componentDidLoad(){this.link=this.el.querySelector("a"),this.updateProductLink(),onChange("selectedPrice",(()=>this.updateProductLink())),onChange("selectedVariant",(()=>this.updateProductLink()))}updateProductLink(){var t,o;const i=null===(o=null===(t=null===window||void 0===window?void 0:window.scData)||void 0===t?void 0:t.pages)||void 0===o?void 0:o.checkout;i&&this.link&&(this.link.href=getProductBuyLink(i,this.addToCart?{}:{no_cart:!0}))}render(){return h(Host,{class:{"is-busy":state.busy&&!!this.addToCart,"is-disabled":state.disabled,"is-sold-out":isProductOutOfStock()&&!isSelectedVariantMissing(),"is-unavailable":isSelectedVariantMissing()},onClick:t=>this.handleCartClick(t)},h("slot",null))}get el(){return this}static get style(){return scProductBuyButtonCss}},[4,"sc-product-buy-button",{addToCart:[4,"add-to-cart"]}]);function defineCustomElement$1(){"undefined"!=typeof customElements&&["sc-product-buy-button"].forEach((t=>{"sc-product-buy-button"===t&&(customElements.get(t)||customElements.define(t,ScProductBuyButton$1))}))}const ScProductBuyButton=ScProductBuyButton$1,defineCustomElement=defineCustomElement$1;export{ScProductBuyButton,defineCustomElement};