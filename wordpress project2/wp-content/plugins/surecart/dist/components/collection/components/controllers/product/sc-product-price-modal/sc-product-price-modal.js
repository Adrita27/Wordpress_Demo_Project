import{h}from"@stencil/core";import{onChange,state}from"@store/product";import{__}from"@wordpress/i18n";import{getProductBuyLink,submitCartForm}from"@store/product/mutations";export class ScProductPriceModal{constructor(){this.buttonText=void 0,this.addToCart=void 0}submit(){var t,e;if(!this.addToCart){const o=null===(e=null===(t=null===window||void 0===window?void 0:window.scData)||void 0===t?void 0:t.pages)||void 0===e?void 0:e.checkout;if(!o)return;return window.location.assign(getProductBuyLink(o))}submitCartForm()}componentWillLoad(){onChange("dialog",(()=>{setTimeout((()=>{var t;null===(t=this.priceInput)||void 0===t||t.triggerFocus()}),50)}))}render(){var t,e,o,i,r,a,s,l,d;return(null===(t=null==state?void 0:state.selectedPrice)||void 0===t?void 0:t.ad_hoc)?h("sc-dialog",{open:state.dialog===((null==this?void 0:this.addToCart)?"ad_hoc_cart":"ad_hoc_buy"),onScRequestClose:()=>state.dialog=null},h("span",{class:"dialog__header",slot:"label"},!!(null===(e=null==state?void 0:state.product)||void 0===e?void 0:e.image_url)&&h("div",{class:"dialog__image"},h("img",{src:null===(o=null==state?void 0:state.product)||void 0===o?void 0:o.image_url})),h("div",{class:"dialog__header-text"},h("div",{class:"dialog__action"},__("Enter An Amount","surecart")),h("div",{class:"dialog__product-name"},null===(i=null==state?void 0:state.product)||void 0===i?void 0:i.name))),h("sc-form",{onScSubmit:t=>{t.stopImmediatePropagation(),this.submit()},onScFormSubmit:t=>t.stopImmediatePropagation()},h("sc-price-input",{ref:t=>this.priceInput=t,value:null===(a=null===(r=state.adHocAmount)||void 0===r?void 0:r.toString)||void 0===a?void 0:a.call(r),"currency-code":null===(s=null==state?void 0:state.selectedPrice)||void 0===s?void 0:s.currency,min:null===(l=null==state?void 0:state.selectedPrice)||void 0===l?void 0:l.ad_hoc_min_amount,max:null===(d=null==state?void 0:state.selectedPrice)||void 0===d?void 0:d.ad_hoc_max_amount,onScInput:t=>state.adHocAmount=parseInt(t.target.value),required:!0}),h("sc-button",{type:"primary",full:!0,submit:!0,busy:state.busy},h("slot",null,this.buttonText||__("Add To Cart","surecart"))))):null}static get is(){return"sc-product-price-modal"}static get encapsulation(){return"shadow"}static get originalStyleUrls(){return{$:["sc-product-price-modal.scss"]}}static get styleUrls(){return{$:["sc-product-price-modal.css"]}}static get properties(){return{buttonText:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"button-text",reflect:!1},addToCart:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"add-to-cart",reflect:!1}}}static get elementRef(){return"el"}}